-- Crear la base de datos
CREATE DATABASE IF NOT EXISTS hacienda_db;

-- Usar la base de datos
USE hacienda_db;

-- --------------------------------------------------------
-- Estructura de la tabla actos_administrativos
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS actos_administrativos (
  noActoAdministrativo VARCHAR(50) NOT NULL PRIMARY KEY,
  id VARCHAR(20) NOT NULL COMMENT 'Identificador principal (Cédula/NIT)',
  idAlterno VARCHAR(30) NULL COMMENT 'Identificador alterno (Ej: Código Predial)',
  razonSocial VARCHAR(150) NOT NULL COMMENT 'Nombre o Razón Social del Contribuyente',
  fechaActo DATE NOT NULL COMMENT 'Fecha de emisión del acto',
  fechaPublicacion DATE NOT NULL COMMENT 'Fecha en que se publica el acto (inicio del término)',
  tipoActuacion VARCHAR(255) NOT NULL COMMENT 'Descripción del tipo de documento o actuación',
  organismo VARCHAR(100) NOT NULL COMMENT 'Entidad que emite el acto',
  area VARCHAR(255) NOT NULL COMMENT 'Subdirección o área competente',
  fechaDesfijacion DATE NULL COMMENT 'Fecha en que se retira el acto de la publicación',
  estado ENUM('tramite', 'finalizado') NOT NULL DEFAULT 'tramite' COMMENT 'Estado del acto: en trámite o finalizado'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- --------------------------------------------------------
-- Inserción de Datos de Prueba (MOCK DATA)
-- --------------------------------------------------------

INSERT INTO actos_administrativos 
    (noActoAdministrativo, id, idAlterno, razonSocial, fechaActo, fechaPublicacion, tipoActuacion, organismo, area, fechaDesfijacion, estado) 
VALUES
-- Registros para JUAN PÉREZ GARCÍA (ID: 123456789)
('4131.032.9.5.111906', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2024-11-15', '2024-11-16', 'MANDAMIENTO DE PAGO IMPUESTO PREDIAL UNIFICADO', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE TESORERÍA - OFICINA TÉCNICA OPERATIVA DE COBRO COACTIVO', '2024-11-21', 'tramite'),
('4131.032.9.5.111908', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2024-09-05', '2024-09-06', 'NOTIFICACIÓN DE AVALÚO CATASTRAL', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE CATASTRO', '2024-09-11', 'finalizado'),
('4131.032.9.5.111915', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2024-03-10', '2024-03-11', 'REQUERIMIENTO ORDINARIO DE INFORMACIÓN', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2024-03-16', 'finalizado'),
('4131.032.9.5.111920', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2023-11-20', '2023-11-21', 'LIQUIDACIÓN OFICIAL DE AFORO', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE GESTIÓN TRIBUTARIA', '2023-11-26', 'finalizado'),
('4131.032.9.5.111925', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2023-06-15', '2023-06-16', 'RESOLUCIÓN DE CORRECCIÓN ARITMÉTICA', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE CATASTRO', '2023-06-21', 'finalizado'),
('4131.032.9.5.111930', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2023-02-08', '2023-02-09', 'CITACIÓN PARA NOTIFICACIÓN PERSONAL', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE TESORERÍA - OFICINA TÉCNICA OPERATIVA DE COBRO COACTIVO', '2023-02-14', 'finalizado'),
('4131.032.9.5.111935', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2022-10-12', '2022-10-13', 'MANDAMIENTO DE PAGO IMPUESTO PREDIAL', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE COBRO COACTIVO', '2022-10-18', 'finalizado'),
('4131.032.9.5.111940', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2022-05-25', '2022-05-26', 'EMPLAZAMIENTO PARA DECLARAR', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2022-05-31', 'finalizado'),
('4131.032.9.5.111945', '123456789', '123-456-789', 'JUAN PÉREZ GARCÍA', '2024-12-01', '2024-12-02', 'RESOLUCIÓN DE FACILIDAD DE PAGO', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE TESORERÍA - OFICINA TÉCNICA OPERATIVA DE COBRO COACTIVO', '2024-12-07', 'tramite'),

-- Registros para EMPRESA COMERCIAL XYZ S.A.S (ID: 987654321)
('4131.032.9.5.111907', '987654321', '987/654/321', 'EMPRESA COMERCIAL XYZ S.A.S', '2024-10-10', '2024-10-11', 'RESOLUCIÓN DE SANCIÓN POR MORA', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2024-10-16', 'finalizado'),
('4131.032.9.5.111950', '987654321', '987/654/321', 'EMPRESA COMERCIAL XYZ S.A.S', '2024-07-18', '2024-07-19', 'REQUERIMIENTO ESPECIAL', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE GESTIÓN TRIBUTARIA', '2024-07-24', 'finalizado'),
('4131.032.9.5.111955', '987654321', '987/654/321', 'EMPRESA COMERCIAL XYZ S.A.S', '2024-04-22', '2024-04-23', 'PLIEGO DE CARGOS', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2024-04-28', 'finalizado'),
('4131.032.9.5.111960', '987654321', '987/654/321', 'EMPRESA COMERCIAL XYZ S.A.S', '2023-12-05', '2023-12-06', 'AUTO DE ARCHIVO', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE CATASTRO', '2023-12-11', 'finalizado'),

-- Registros para INVERSIONES ALPHA SAS (ID: 111222333)
('4131.032.9.5.111909', '111222333', '111/222/333', 'INVERSIONES ALPHA SAS', '2024-12-01', '2024-12-02', 'EMPLAZAMIENTO DE TRIBUTOS', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE COBRO COACTIVO', '2024-12-07', 'tramite'),
('4131.032.9.5.111965', '111222333', '111/222/333', 'INVERSIONES ALPHA SAS', '2024-08-14', '2024-08-15', 'LIQUIDACIÓN OFICIAL DE REVISIÓN', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE GESTIÓN TRIBUTARIA', '2024-08-20', 'finalizado'),
('4131.032.9.5.111970', '111222333', '111/222/333', 'INVERSIONES ALPHA SAS', '2023-09-28', '2023-09-29', 'RESOLUCIÓN SANCIONATORIA', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2023-10-04', 'finalizado'),

-- Registros para CONSTRUCTORA DEL SUR LTDA (ID: 555666777)
('4131.032.9.5.111910', '555666777', '555-666-777', 'CONSTRUCTORA DEL SUR LTDA', '2024-08-20', '2024-08-21', 'LIQUIDACIÓN OFICIAL DE REVISIÓN', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE GESTIÓN TRIBUTARIA', '2024-08-26', 'finalizado'),
('4131.032.9.5.111975', '555666777', '555-666-777', 'CONSTRUCTORA DEL SUR LTDA', '2024-05-10', '2024-05-11', 'NOTIFICACIÓN POR AVISO', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE CATASTRO', '2024-05-16', 'finalizado'),
('4131.032.9.5.111980', '555666777', '555-666-777', 'CONSTRUCTORA DEL SUR LTDA', '2023-07-22', '2023-07-23', 'ACTA DE INSPECCIÓN TRIBUTARIA', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE FISCALIZACIÓN', '2023-07-28', 'finalizado'),

-- Registros adicionales para otros contribuyentes
('4131.032.9.5.111985', '444555666', '444-555-666', 'TRANSPORTES NACIONALES S.A', '2024-11-28', '2024-11-29', 'MANDAMIENTO DE PAGO ICA', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE COBRO COACTIVO', '2024-12-04', 'tramite'),
('4131.032.9.5.111990', '444555666', '444-555-666', 'TRANSPORTES NACIONALES S.A', '2024-06-15', '2024-06-16', 'RESOLUCIÓN DE DEVOLUCIÓN', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE TESORERÍA - OFICINA TÉCNICA OPERATIVA DE COBRO COACTIVO', '2024-06-21', 'finalizado'),
('4131.032.9.5.111995', '777888999', '777/888/999', 'COMERCIALIZADORA ANDINA LTDA', '2024-10-05', '2024-10-06', 'EMBARGO DE BIENES MUEBLES', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE COBRO COACTIVO', '2024-10-11', 'finalizado'),
('4131.032.9.5.112000', '777888999', '777/888/999', 'COMERCIALIZADORA ANDINA LTDA', '2023-04-18', '2023-04-19', 'RESOLUCIÓN DE PRESCRIPCIÓN', 'DEPARTAMENTO ADMINISTRATIVO DE HACIENDA', 'SUBDIRECCIÓN DE GESTIÓN TRIBUTARIA', '2023-04-24', 'finalizado');

-- --------------------------------------------------------
-- Creación de índices para optimizar la búsqueda por ID
-- --------------------------------------------------------

CREATE INDEX idx_id_principal ON actos_administrativos (id);
CREATE INDEX idx_id_alterno ON actos_administrativos (idAlterno);

